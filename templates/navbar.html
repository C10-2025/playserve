{% load static %}
<nav class="navbar">
    <a href="{% url 'main:home' %}" class="logo">
        <img src="{% static 'image/logo.svg' %}" alt="PlayServe Logo">
    </a>

    <div class="nav-links">
        {% if user.is_authenticated %}
            <a href="#">Match Making</a>
            <a href="{% url 'booking:field_list' %}">Book Courts</a>
            <a href="#">Community</a>
            <a href="#">Court Reviews</a>
        {% else %}
            <a href="{% url 'profil:login' %}">Match Making</a>
            <a href="{% url 'profil:login' %}">Book Courts</a>
            <a href="{% url 'profil:login' %}">Community</a>
            <a href="{% url 'profil:login' %}">Court Reviews</a>
        {% endif %}
    </div>

    <div class="nav-buttons">
        {% if user.is_authenticated %}
            <a href="{% url 'booking:my_bookings' %}" class="btn btn-outline" title="My Bookings">ðŸ“… My Bookings</a>
            <a href="{% url 'profil:profile_update' %}" class="user-profile-link">
                <div class="profile-info">
                    <span class="profile-username">{{ user.username }}</span>
                    <span class="profile-rank">{{ profile.rank }}</span>
                </div>
                <div class="avatar-container">
                    <img src="{% static profile.avatar %}" alt="Avatar" class="profile-avatar">
                    {% if profile.rank %}<img src="{% static 'image/'|add:profile.rank|lower|add:'.svg' %}" alt="Rank" class="rank-badge">{% endif %}
                </div>
            </a>
            <a href="{% url 'profil:logout' %}" class="btn">Logout</a>
        {% else %}
            <a href="{% url 'profil:login' %}" class="btn">Log In</a>
            <a href="{% url 'profil:register1' %}" class="btn btn-outline">Sign Up</a>
        {% endif %}
    </div>

    <button class="mobile-menu-button">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>
</nav>

<div class="mobile-menu">
    {% if user.is_authenticated %}
        <a href="{% url 'profil:profile_update' %}" class="user-profile-link-mobile">
            <div class="avatar-container">
                <img src="{% static profile.avatar %}" alt="Avatar" class="profile-avatar">
                {% if profile.rank %}<img src="{% static 'image/'|add:profile.rank|lower|add:'.svg' %}" alt="Rank" class="rank-badge">{% endif %}
            </div>
            <div class="profile-info">
                <span class="profile-username">{{ user.username }}</span>
                <span class="profile-rank">{{ profile.rank }}</span>
            </div>
        </a>
        <hr class="mobile-menu-divider">
        <a href="{% url 'booking:my_bookings' %}">ðŸ“… My Bookings</a>
        <a href="#">Match Making</a>
        <a href="{% url 'booking:field_list' %}">Book Courts</a>
        <a href="#">Community</a>
        <a href="#">Court Reviews</a>
        <a href="{% url 'profil:logout' %}" class="btn">Logout</a>
    {% else %}
        <a href="{% url 'profil:login' %}">Match Making</a>
        <a href="{% url 'profil:login' %}">Book Courts</a>
        <a href="{% url 'profil:login' %}">Community</a>
        <a href="{% url 'profil:login' %}">Court Reviews</a>
        <a href="{% url 'profil:login' %}" class="btn">Log In</a>
        <a href="{% url 'profil:register1' %}" class="btn btn-outline">Sign Up</a>
    {% endif %}
</div>

<script>
    const mobileMenuButton = document.querySelector(".mobile-menu-button");
    const mobileMenu = document.querySelector(".mobile-menu");
  
    mobileMenuButton.addEventListener("click", () => {
      const isHidden = mobileMenu.style.display === 'none' || mobileMenu.style.display === '';
      mobileMenu.style.display = isHidden ? 'block' : 'none';
    });

    window.addEventListener('resize', () => {
        if (window.innerWidth >= 1200) { 
            mobileMenu.style.display = 'none';
        }
    });
</script>